<!DOCTYPE html>
<html xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport">
    <meta charset="utf-8">
</head>
<body>
<div>
    <th:block th:fragment="links">
        <link crossorigin="anonymous"
              integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
              rel="stylesheet" th:href="@{https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css}">
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
        <script crossorigin="anonymous"
                integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
                src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
        <script crossorigin="anonymous"
                integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
                src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script crossorigin="anonymous"
                integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
                src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <link rel="stylesheet" th:href="@{~/css/css.css}" type="text/css">
    </th:block>
    <div th:fragment="head">
        <header>
            <nav class="navbar navbar-expand-md navbar-light bg-light sticky-top hdr">
                <div class="container-fluid">
                    <a class="navbar-brad" th:href="@{/home}">
                        <img th:src="@{/images/logo2.png}">
                    </a>
                    <button class="navbar-toggler" data-target="#navbarResponsive" data-toggle="collapse"
                            type="button"><span
                            class="navbar-toggler-icon"></span></button>
                    <div class="collapse navbar-collapse" id="navbarResponsive">
                        <ul class="navbar-nav ml-auto">
                            <li>
                                <form id="searchUser" th:action="@{/search}" th:method="post">
                                    <input id="searchUserInput" placeholder="Найти пользователя" th:name="searchUsers"
                                           type="text">
                                    <input id="searchUserSubmit" type="submit" value="Найти">
                                </form>
                            </li>
                            <li class="nav-item"
                                th:classappend="${#httpServletRequest.getRequestURI() == '/home' || #httpServletRequest.getRequestURI() == '/' ? 'active':''}">
                                <a class="nav-link" th:href="@{/home}">Главная</a>
                            </li>
                            <li class="nav-item"
                                th:classappend="${#httpServletRequest.getRequestURI() == '/chat' ? 'active':''}">
                                <a class="nav-link" th:href="@{/chat}">Чат</a>
                            </li>
                            <li class="nav-item active d-inline" sec:authorize="isAuthenticated()">
                                <a th:href="@{/user/{id}(id=${#authentication.getPrincipal().getId()})}"><span
                                        class="nav-link active" id="username"
                                        th:text="${#authentication.getPrincipal().getUsername()}"></span></a>
                            </li>
                            <li class="nav-item active d-inline header-hidden" sec:authorize="isAuthenticated()">
                                <span class="nav-link active" hidden
                                      id="login" th:text="${#authentication.getPrincipal().getLogin()}"></span>
                            </li>
                            <li class="nav-item active d-inline header-hidden" sec:authorize="isAuthenticated()">
                                <span class="nav-link active" hidden
                                      id="id" th:text="${#authentication.getPrincipal().getId()}"></span>
                            </li>
                            <li class="nav-item active" sec:authorize="isAuthenticated()">
                                <form th:action="@{/logout}" th:method="post">
                                    <input class="nav-link d-inline" style="
                                     background:none;
                                     color:inherit;
                                     border:none;
                                     font: inherit;" type="submit" value="Выйти">
                                </form>
                            </li>
                            <li class="nav-item" sec:authorize="isAnonymous()"
                                th:classappend="${#httpServletRequest.getRequestURI() == '/login' ? 'active':''}">
                                <a class="nav-link" th:href="@{/login}">Войти</a>
                            </li>
                            <li class="nav-item" sec:authorize="isAnonymous()"
                                th:classappend="${#httpServletRequest.getRequestURI() == '/signup' ? 'active':''}">
                                <a class="nav-link" th:href="@{/signup}">Регистрация</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
    </div>
</div>
</body>
</html>